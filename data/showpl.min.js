var ms="JanFebMarAprMayJunJulAugSepOctNovDec",date,dy,mm,yr,hr,mn,tm,path,x="";function prtdsmn(v){var zdstr="ArTaGeCnLeViLiScSgCpAqPi",nakstr="AswBhaKriRohMriArdPunPusAslMagP.PU.PHasChiSwaVisAnuJyeMulP.SU.SShrDhaShaP.BU.BRev",m=v%60,d=Math.floor(v/60)%30,n=Math.floor(v/800);v/=60;var s=Math.floor(v/30),ds="";d<10&&(ds+="0"),ds+=d.toString(10);var ms="";return m<10&&(ms+="0"),ms+=m.toString(10),ds+zdstr.substr(2*s,2)+ms+" "+nakstr.substr(3*n,3)}function showUTCDateTime(mon,day,year,hour,min){var s="";return day<10&&(s+="0"),s+=day+" "+ms.substr(3*mon,3)+" "+year,s+="<br>",hour<10&&(s+="0"),s+=hour+":",min<10&&(s+=0),s+=min+" UTC"}function loadJson(path,success,error){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(success?success(JSON.parse(this.responseText)):(console.log("got an error"),alert("Error opening "+path)))},xmlhttp.open("GET",path,!0),xmlhttp.send()}function prtAyanamsha(ay){d=Math.abs(ay/60),m=Math.abs(ay%60);var ms="";return m<10&&(ms+="0"),ms+=m.toString(10),"Lahiri: -"+Math.floor(d)+"°"+ms+"'"}function showPlanets(data,day,time){var dy=day-1,plstr="SuMoMaMeJuVeSaRaKe",pp=new Int16Array(9),rt=new Array(9),pr=60*time;pr/=86400,idx=0;for(var i=0;i<8;i++)pp[i]=(data[dy][2*idx]+pr*data[dy][2*idx+1])%21600,pp[i]<0&&(pp[i]+=21600),data[dy][2*idx+1]<0?rt[i]=-1:rt[i]=0,idx++;pr>=.5&&(pr-=.5,pp[1]=(data[dy][16]+pr*data[dy][17])%21600),pp[8]=(pp[7]+10800)%21600;var s="";s+=prtAyanamsha(data[dy][18])+"<br><br>";for(var i=0;i<9;i++)s+=plstr.substr(2*i,2),rt[i]<0&&i<7?s+="R ":s+="   ",s+=prtdsmn(pp[i]),s+="<br>";return s}date=new Date,dy=date.getUTCDate(),mm=date.getUTCMonth(),yr=date.getUTCFullYear(),hr=date.getUTCHours(),mn=date.getUTCMinutes(),tm=60*hr+mn,x+=showUTCDateTime(mm,dy,yr,hr,mn)+"<br>",loadJson(path="data/"+yr+"/"+yr+"."+ms.substr(3*mm,3)+".json",function(success){x+=showPlanets(success,dy,tm),document.getElementById("showplanets").innerHTML=x},function(error){alert("Error loading data.\n"+path)});